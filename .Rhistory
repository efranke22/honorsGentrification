<<<<<<< Updated upstream
CityPoc = weighted.mean((TotalPopRace - PopWhiteAlone)/TotalPopRace, TotalPopRace),
CityAvgInc = weighted.mean(medianIncome, TotalPopRace),
CityBachelors = weighted.mean(bachelors25to64/total25to64, total25to64)) %>%
ungroup() %>%
mutate(AvgRent = RentOccupied/OwnershipTotal,
Poc = (TotalPopRace - PopWhiteAlone)/TotalPopRace,
Bachelors = bachelors25to64/total25to64,
highRent = case_when(AvgRent >= CityAvgRent ~ 1,
TRUE ~ 0),
highPoc = case_when(Poc >= CityPoc ~ 1,
TRUE ~ 0),
lowInc = case_when(medianIncome <= CityAvgInc ~ 1,
TRUE ~ 0),
lowBachelors = case_when(Bachelors <= CityBachelors ~ 1,
TRUE ~ 0),
totGent = highRent + highPoc + lowInc + lowBachelors,
bates = case_when(totGent >= 3 ~ 1,
TRUE ~0)) %>%
select(bates) %>%
st_drop()
gentBates <- tract2010 %>%
filter(county %in% c("Hennepin", "Ramsey")) %>%
group_by(county) %>%
mutate(CityAvgRent = weighted.mean(RentOccupied/OwnershipTotal, OwnershipTotal),
CityPoc = weighted.mean((TotalPopRace - PopWhiteAlone)/TotalPopRace, TotalPopRace),
CityAvgInc = weighted.mean(medianIncome, TotalPopRace),
CityBachelors = weighted.mean(bachelors25to64/total25to64, total25to64)) %>%
ungroup() %>%
mutate(AvgRent = RentOccupied/OwnershipTotal,
Poc = (TotalPopRace - PopWhiteAlone)/TotalPopRace,
Bachelors = bachelors25to64/total25to64,
highRent = case_when(AvgRent >= CityAvgRent ~ 1,
TRUE ~ 0),
highPoc = case_when(Poc >= CityPoc ~ 1,
TRUE ~ 0),
lowInc = case_when(medianIncome <= CityAvgInc ~ 1,
TRUE ~ 0),
lowBachelors = case_when(Bachelors <= CityBachelors ~ 1,
TRUE ~ 0),
totGent = highRent + highPoc + lowInc + lowBachelors,
bates = case_when(totGent >= 3 ~ 1,
TRUE ~0)) %>%
select(bates) %>%
st_drop_geometry()
# find metro area mean income
tract2010 %>%
summarize(meanMetroInc = weighted.mean(medianIncome, TotalPopRace, na.rm = TRUE))
# find average amount of housing built in the last twenty years and identify gentrifiable tracts accordingly
gentFreeman <- tract2010 %>%
filter(county %in% c("Hennepin", "Ramsey")) %>%
mutate(built1980to2004 = (built2000to2004 + built1990to1999 + built1980to1989)  / totalStructure,
medianRecHome = weighted.mean(built1980to2004, totalStructure, na.rm = TRUE),
freeman = case_when(medianIncome <= 33140.75 & built1980to2004 <= medianRecHome ~ 1,
TRUE ~ 0)) %>%
select(freeman, tract) %>%
st_drop_geometry()
tract2010 %>%
st_drop_geometry() %>%
summarize(meanMetroInc = weighted.mean(medianIncome, TotalPopRace, na.rm = TRUE))
# find metro area mean income
tract2010 %>%
st_drop_geometry() %>%
summarize(meanMetroInc = weighted.mean(medianIncome, TotalPopRace, na.rm = TRUE))
# find average amount of housing built in the last twenty years and identify gentrifiable tracts accordingly
gentFreeman <- tract2010 %>%
filter(county %in% c("Hennepin", "Ramsey")) %>%
mutate(built1980to2004 = (built2000to2004 + built1990to1999 + built1980to1989)  / totalStructure,
medianRecHome = weighted.mean(built1980to2004, totalStructure, na.rm = TRUE),
freeman = case_when(medianIncome <= 35167.87 & built1980to2004 <= medianRecHome ~ 1,
TRUE ~ 0)) %>%
select(freeman, tract) %>%
st_drop_geometry()
gentDing %>%
left_join(gentFreeman) %>%
left_join(gentBates)
gentDing
gentDing %>%
left_join(gentFreeman, by = "tract") %>%
left_join(gentBates, by = "tract")
gentBates <- tract2010 %>%
filter(county %in% c("Hennepin", "Ramsey")) %>%
group_by(county) %>%
mutate(CityAvgRent = weighted.mean(RentOccupied/OwnershipTotal, OwnershipTotal),
CityPoc = weighted.mean((TotalPopRace - PopWhiteAlone)/TotalPopRace, TotalPopRace),
CityAvgInc = weighted.mean(medianIncome, TotalPopRace),
CityBachelors = weighted.mean(bachelors25to64/total25to64, total25to64)) %>%
ungroup() %>%
mutate(AvgRent = RentOccupied/OwnershipTotal,
Poc = (TotalPopRace - PopWhiteAlone)/TotalPopRace,
Bachelors = bachelors25to64/total25to64,
highRent = case_when(AvgRent >= CityAvgRent ~ 1,
TRUE ~ 0),
highPoc = case_when(Poc >= CityPoc ~ 1,
TRUE ~ 0),
lowInc = case_when(medianIncome <= CityAvgInc ~ 1,
TRUE ~ 0),
lowBachelors = case_when(Bachelors <= CityBachelors ~ 1,
TRUE ~ 0),
totGent = highRent + highPoc + lowInc + lowBachelors,
bates = case_when(totGent >= 3 ~ 1,
TRUE ~0)) %>%
select(bates, tract) %>%
st_drop_geometry()
gentDing %>%
left_join(gentFreeman, by = "tract") %>%
left_join(gentBates, by = "tract")
gentrifiable <- gentDing %>%
left_join(gentFreeman, by = "tract") %>%
left_join(gentBates, by = "tract") %>%
mutate(canGent = as.factor(case_when(Ding+freeman + bates >=2 ~ 1,
TRUE ~ 0)))
gentrifiable %>%
ggplot()+
geom_sf(aes(fill=canGent), lwd = 0.2, color = "white")+
#geom_sf(data = roads_metro, fill = "green",color = "green", lwd= 0.3)+
geom_sf(data = river_lakes_big, fill = "lightblue",color = "lightblue")+
theme_classic()
river_lakes_big <- river_lakes %>%
filter(AREA_ACRES >= 500)
gentrifiable %>%
ggplot()+
geom_sf(aes(fill=canGent), lwd = 0.2, color = "white")+
#geom_sf(data = roads_metro, fill = "green",color = "green", lwd= 0.3)+
geom_sf(data = river_lakes_big, fill = "lightblue",color = "lightblue")+
theme_classic()
roads_sub <- st_crop(roads,st_bbox(gentrifiable))
gentrifiable %>%
ggplot()+
geom_sf(aes(fill=canGent), lwd = 0.2, color = "white")+
geom_sf(data = roads_sub, fill = "green",color = "green", lwd= 0.3)+
#geom_sf(data = river_lakes_big, fill = "lightblue",color = "lightblue")+
theme_classic()
gentrifiable
gentrifiable %>%
mutate(canGent = case_when(canGent == "1" ~ "Yes",
TRUE ~ "No")) %>%
ggplot()+
geom_sf(aes(fill=canGent), lwd = 0.2, color = "white")+
geom_sf(data = roads_sub, fill = "gray",color = "gray", lwd= 0.5)+
#geom_sf(data = river_lakes_big, fill = "lightblue",color = "lightblue")+
theme_classic()+
labs(title = "Gentrifiable census tracts in Minneapolis-Saint Paul in 2010", fill = "Gentrifiable")+
theme(axis.line = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank(),
legend.position = "none",
plot.title.position = "plot",
plot.title = element_markdown(family = "mono"),
plot.subtitle = element_markdown(family = "mono", size = 8))+
scale_fill_manual(values = c("navy", "red"))
gentrifiable %>%
mutate(canGent = case_when(canGent == "1" ~ "Yes",
TRUE ~ "No")) %>%
ggplot()+
geom_sf(aes(fill=canGent), lwd = 0.2, color = "white")+
geom_sf(data = roads_sub, fill = "gray",color = "gray", lwd= 0.5)+
#geom_sf(data = river_lakes_big, fill = "lightblue",color = "lightblue")+
theme_classic()+
labs(title = "Gentrifiable census tracts in Minneapolis-Saint Paul in 2010", fill = "Gentrifiable")+
theme(axis.line = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank(),
legend.title = element_markdown(family = "mono"),
plot.title.position = "plot",
plot.title = element_markdown(family = "mono", size = 10))+
scale_fill_manual(values = c("navy", "red"))
river_lakes_big <- river_lakes %>%
filter(AREA_ACRES >= 300)
roads_sub <- st_crop(roads,st_bbox(gentrifiable))
gentrifiable %>%
mutate(canGent = case_when(canGent == "1" ~ "Yes",
TRUE ~ "No")) %>%
ggplot()+
geom_sf(aes(fill=canGent), lwd = 0.2, color = "white")+
geom_sf(data = roads_sub, fill = "gray",color = "gray", lwd= 0.5)+
geom_sf(data = river_lakes_big, fill = "lightblue",color = "lightblue")+
theme_classic()+
labs(title = "Gentrifiable census tracts in Minneapolis-Saint Paul in 2010", fill = "Gentrifiable")+
theme(axis.line = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank(),
legend.title = element_markdown(family = "mono"),
plot.title.position = "plot",
plot.title = element_markdown(family = "mono", size = 10))+
scale_fill_manual(values = c("navy", "red"))
river_lakes_big <- st_crop(river_lakes %>%
filter(AREA_ACRES >= 300), st_bbox(gentrifiable))
river_lakes %>%
filter(AREA_ACRES >= 300)
st_crop(rivers_lakes_big, st_bbox(gentrifiable))
river_lakes_big <- river_lakes %>%
filter(AREA_ACRES >= 300)
st_crop(rivers_lakes_big, st_bbox(gentrifiable))
st_crop(river_lakes_big, st_bbox(gentrifiable))
View(roads_sub)
View(river_lakes_big)
gentrifiable %>%
mutate(canGent = case_when(canGent == "1" ~ "Yes",
TRUE ~ "No")) %>%
ggplot()+
geom_sf(aes(fill=canGent), lwd = 0.2, color = "white")+
geom_sf(data = roads_sub, fill = "gray",color = "gray", lwd= 0.5)+
geom_sf(data = river_lakes_big, fill = "lightblue",color = "lightblue")+
theme_classic()+
labs(title = "Gentrifiable census tracts in Minneapolis-Saint Paul in 2010", fill = "Gentrifiable")+
theme(axis.line = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank(),
legend.title = element_markdown(family = "mono"),
plot.title.position = "plot",
plot.title = element_markdown(family = "mono", size = 10))+
scale_fill_manual(values = c("navy", "red"))
st_crs(gentrifiable)
st_crs(river_lakes_big)
st_crs(roads_sub)
st_crs(gentrifiable)
st_as_sf(river_lakes_big, crs = NAD83)
river_lakes_big <- st_as_sf(river_lakes_big, crs = NAD83)
st_crop(river_lakes_big, st_bbox(gentrifiable))
st_crs(river_lakes_big)
river_lakes_big <- st_as_sf(river_lakes_big, crs = NAD83)
st_crs(river_lakes_big)
st_transform(river_lakes_big, crs = NAD83)
st_transform(river_lakes_big, crs = 4617)
st_crs(river_lakes_big)
st_transform(river_lakes_big, crs = "OGC:CRS84")
river_lakes_big <- st_transform(river_lakes_big, crs = "OGC:CRS84")
st_crs(river_lakes_big)
gentrifiable2 <- st_transform(gentrifiable, crs = "OGC:CRS84")
st_crs(gentrifiable2)
st_crop(river_lakes_big, st_bbox(gentrifiable2))
gentrifiable %>%
mutate(canGent = case_when(canGent == "1" ~ "Yes",
TRUE ~ "No")) %>%
ggplot()+
geom_sf(aes(fill=canGent), lwd = 0.2, color = "white")+
#geom_sf(data = roads_sub, fill = "gray",color = "gray", lwd= 0.5)+
geom_sf(data = river_lakes_big, fill = "lightblue",color = "lightblue")+
theme_classic()+
labs(title = "Gentrifiable census tracts in Minneapolis-Saint Paul in 2010", fill = "Gentrifiable")+
theme(axis.line = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank(),
legend.title = element_markdown(family = "mono"),
plot.title.position = "plot",
plot.title = element_markdown(family = "mono", size = 10))+
scale_fill_manual(values = c("navy", "red"))
gentrifiable %>%
mutate(canGent = case_when(canGent == "1" ~ "Yes",
TRUE ~ "No")) %>%
ggplot()+
geom_sf(aes(fill=canGent), lwd = 0.2, color = "white")+
geom_sf(data = roads_sub, fill = "gray",color = "gray", lwd= 0.5)+
#geom_sf(data = river_lakes_big, fill = "lightblue",color = "lightblue")+
theme_classic()+
labs(title = "Gentrifiable census tracts in Minneapolis-Saint Paul in 2010", fill = "Gentrifiable")+
theme(axis.line = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank(),
legend.title = element_markdown(family = "mono"),
plot.title.position = "plot",
plot.title = element_markdown(family = "mono", size = 10))+
scale_fill_manual(values = c("navy", "red"))
install.packages("PrettyCols")
library(PrettyCols)
gentrifiable %>%
mutate(canGent = case_when(canGent == "1" ~ "Yes",
TRUE ~ "No")) %>%
ggplot()+
geom_sf(aes(fill=canGent), lwd = 0.2, color = "white")+
geom_sf(data = roads_sub, fill = "gray",color = "gray", lwd= 0.5)+
#geom_sf(data = river_lakes_big, fill = "lightblue",color = "lightblue")+
theme_classic()+
labs(title = "Gentrifiable census tracts in Minneapolis-Saint Paul in 2010", fill = "Gentrifiable")+
theme(axis.line = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank(),
legend.title = element_markdown(family = "mono"),
plot.title.position = "plot",
plot.title = element_markdown(family = "mono", size = 10))+
scale_fill_pretty_d()
gentrifiable %>%
mutate(canGent = case_when(canGent == "1" ~ "Yes",
TRUE ~ "No")) %>%
ggplot()+
geom_sf(aes(fill=canGent), lwd = 0.2, color = "white")+
geom_sf(data = roads_sub, fill = "gray",color = "gray", lwd= 0.5)+
#geom_sf(data = river_lakes_big, fill = "lightblue",color = "lightblue")+
theme_classic()+
labs(title = "Gentrifiable census tracts in Minneapolis-Saint Paul in 2010", fill = "Gentrifiable")+
theme(axis.line = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank(),
legend.title = element_markdown(family = "mono"),
plot.title.position = "plot",
plot.title = element_markdown(family = "mono", size = 10))+
scale_fill_pretty_d(name = "TangerineBlues")
gentrifiable %>%
mutate(canGent = case_when(canGent == "1" ~ "Yes",
TRUE ~ "No")) %>%
ggplot()+
geom_sf(aes(fill=canGent), lwd = 0.2, color = "white")+
geom_sf(data = roads_sub, fill = "gray",color = "gray", lwd= 0.5)+
#geom_sf(data = river_lakes_big, fill = "lightblue",color = "lightblue")+
theme_classic()+
labs(title = "Gentrifiable census tracts in Minneapolis-Saint Paul in 2010", fill = "Gentrifiable")+
theme(axis.line = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank(),
legend.title = element_markdown(family = "mono"),
plot.title.position = "plot",
plot.title = element_markdown(family = "mono", size = 10))+
scale_fill_pretty_d(name = "Autumn")
gentrifiable %>%
mutate(canGent = case_when(canGent == "1" ~ "Yes",
TRUE ~ "No")) %>%
ggplot()+
geom_sf(aes(fill=canGent), lwd = 0.2, color = "white")+
geom_sf(data = roads_sub, fill = "gray",color = "gray", lwd= 0.5)+
#geom_sf(data = river_lakes_big, fill = "lightblue",color = "lightblue")+
theme_classic()+
labs(title = "Gentrifiable census tracts in Minneapolis-Saint Paul in 2010", fill = "Gentrifiable")+
theme(axis.line = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank(),
legend.title = element_markdown(family = "mono"),
plot.title.position = "plot",
plot.title = element_markdown(family = "mono", size = 10))+
scale_fill_pretty_d(name = "Dark")
gentrifiable %>%
mutate(canGent = case_when(canGent == "1" ~ "Yes",
TRUE ~ "No")) %>%
ggplot()+
geom_sf(aes(fill=canGent), lwd = 0.2, color = "white")+
geom_sf(data = roads_sub, fill = "gray",color = "gray", lwd= 0.5)+
#geom_sf(data = river_lakes_big, fill = "lightblue",color = "lightblue")+
theme_classic()+
labs(title = "Gentrifiable census tracts in Minneapolis-Saint Paul in 2010", fill = "Gentrifiable")+
theme(axis.line = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank(),
legend.title = element_markdown(family = "mono"),
plot.title.position = "plot",
plot.title = element_markdown(family = "mono", size = 10))+
scale_fill_pretty_d(name = "Autumn", direction = -1)
gentrifiable %>%
mutate(canGent = case_when(canGent == "1" ~ "Yes",
TRUE ~ "No")) %>%
ggplot()+
geom_sf(aes(fill=canGent), lwd = 0.2, color = "white")+
geom_sf(data = roads_sub, fill = "gray",color = "gray", lwd= 0.5)+
#geom_sf(data = river_lakes_big, fill = "lightblue",color = "lightblue")+
theme_classic()+
labs(title = "Gentrifiable census tracts in Minneapolis-Saint Paul in 2010", fill = "Gentrifiable")+
theme(axis.line = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank(),
legend.title = element_markdown(family = "mono"),
plot.title.position = "plot",
plot.title = element_markdown(family = "mono", size = 10))+
scale_fill_pretty_d(name = "Autumn", direction = -1)
acs2020 <- get_acs(year = 2020, state = "MN", geography = "tract", variables = c("B06011_001", "B19313_001", "B23006_023", "B25035_001", "B25034_001", "B25034_002", "B25034_003", "B25034_004", "B25034_005", "B25034_006", "B25034_007", "B25034_008", "B25034_009", "B25034_010", "B25058_001", "B25064_001"), output = "wide") %>%
filter(word(NAME, 4) %in% c("Hennepin", "Ramsey", "Anoka", "Carver", "Dakota", "Scott", "Washington"))%>%
mutate(tract = word(NAME, 3),
tract = str_remove(tract, ","),
county = word(NAME, 4)) %>%
select(-NAME) %>%
rename("medianIncome" = "B06011_001E",
"aggregateIncome" = "B19313_001E",
"bachelors25to64" = "B23006_023E",
"total25to64" = "B23006_001E",
"medYrStructureBuilt" = "B25035_001E",
"totalStructure" = "B25034_001E",
"builtSince2005" = "B25034_002E",
"built2000to2004" = "B25034_003E",
"built1990to1999" = "B25034_004E",
"built1980to1989" = "B25034_005E",
"built1970to1979" = "B25034_006E",
"built1960to1969" = "B25034_007E",
"built1950to1959" = "B25034_008E",
"built1940to1949" = "B25034_009E",
"builtPre1940" = "B25034_010E",
"medContractRent" = "B25058_001E",
"medGrossRent" = "B25064_001E",
"medIncMoe" = "B06011_001M",
"aggIncMoe" = "B19313_001M",
"bachelors25to64Moe" = "B23006_023M",
"total25to64Moe" = "B23006_001M",
"medYrStructureBuiltMoe" = "B25035_001M",
"totalStructureMoe" = "B25034_001M",
"builtSince2005Moe" = "B25034_002M",
"built2000to2004Moe" = "B25034_003M",
"built1990to1999Moe" = "B25034_004M",
"built1980to1989Moe" = "B25034_005M",
"built1970to1979Moe" = "B25034_006M",
"built1960to1969Moe" = "B25034_007M",
"built1950to1959Moe" = "B25034_008M",
"built1940to1949Moe" = "B25034_009M",
"builtPre1940Moe" = "B25034_010M",
"medContractRentMoe" = "B25058_001M",
"medGrossRentMoe" = "B25064_001M")
acsvariables2020 <- load_variables(year = 2020, dataset = "acs5")
View(acsvariables2020)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
saintpaulcrime <- read_csv("Data/Crime/Crime_Incident_Report_2023.csv")
saintpaulcrime <- saintpaulcrime %>%
mutate(year = as.numeric(substr(DATE, 1, 4))) %>%
filter(year != 2014, year!=2023) %>%
mutate(OffenseCat = case_when(INCIDENT %in% c("Theft", "Burglary", "Vandalism", "Narcotics", "Criminal Damage", "Graffiti", "THEFT") ~ "Theft",
INCIDENT == "Auto Theft" ~ "Auto Theft",
INCIDENT %in% c("Simple Asasult Dom.", "Robbery", "Agg. Assault", "Agg. Assault Dom.", "Rape", "Arson", "Simple Assault Dom.", "Simple Assault Dom", "Homicide", "Agg. Assault Dom") ~ "Violent",
TRUE ~ "random")) %>%
filter(OffenseCat != "random")
saintpaulcrime %>%
filter(str_detect(BLOCK, " & ")| str_detect(BLOCK, " AND "))
=======
str_replace(BLOCK, "LOWERSTDENNIS") ~ "LOWER ST DENNIS",
str_replace(BLOCK, "LYNNHURST") ~ "LYNN HURST",
str_replace(BLOCK, "MARTINLUTHERKING") ~ "MARTIN LUTHER KING",
str_replace(BLOCK, "MISSISSIPPIRIVER") ~ "MISSISSIPPI RIVER",
str_replace(BLOCK, "MORNINGSIDE") ~ "MORNING SIDE",
str_replace(BLOCK, "MTAIRY") ~ "MT AIRY",
str_replace(BLOCK, "MTCURVE") ~ "MT CURVE",
str_replace(BLOCK, "OLDSIXTH") ~ "OLD SIXTH",
str_replace(BLOCK, "OTTOHUMMER") ~ "OTTO HUMMER",
str_replace(BLOCK, "PIERCEBUTLER") ~ "PIERCE BUTLER",
str_replace(BLOCK, "PIGSEYELAKE") ~ "PIGSEYE LAKE",
str_replace(BLOCK, "PTDOUGLAS") ~ "PT DOUGLAS",
str_replace(BLOCK, "RIVERPARK") ~ "RIVER PARK",
str_replace(BLOCK, "SPRUCETREE") ~ "SPRUCE TREE",
str_replace(BLOCK, "STANTHONY") ~ "ST ANTHONY",
str_replace(BLOCK, "STALBANS") ~ "ST ALBANS",
str_replace(BLOCK, "STCLAIR") ~ "ST CLAIR",
str_replace(BLOCK, "STDENNIS") ~ "ST DENNIS",
str_replace(BLOCK, "STPAUL") ~ "ST PAUL",
str_replace(BLOCK, "STPETER") ~ "ST PETER",
str_replace(BLOCK, "TROUTBROOK") ~ "TROUT BROOK",
str_replace(BLOCK, "UPPERAFTON") ~ "UPPER AFTON",
str_replace(BLOCK, "UPPERSTDENNIS") ~ "UPPER ST DENNIS",
str_replace(BLOCK, "VANBUREN") ~ "VAN BUREN",
str_replace(BLOCK, "VANSLYKE") ~ "VAN SLYKE",
str_replace(BLOCK, "WHEELOCKRIDGE") ~ "WHEELOCK RIDGE",
str_replace(BLOCK, "WHITEBEAR") ~ "WHITE BEAR",
str_replace(BLOCK, "WILLIAMTELL") ~ "WILLIAM TELL",
str_replace(BLOCK, "YACHTCLUB") ~ "YACHT CLUB",
TRUE ~ BLOCK)))
saintpaulcrime %>%
filter(!str_detect(BLOCK, " & "), !str_detect(BLOCK, " AND ")) %>%
mutate(street_address = word(BLOCK, 1),
street_address = str_replace(street_address, "X", "0")) %>%
mutate(BLOCK = str_replace(BLOCK, "OLDHUDSON") ~ "OLD HUDSON",
str_replace(BLOCK, "ANNARBOR") ~ "ANN ARBOR",
str_replace(BLOCK, "BARGECHANNEL") ~ "BARGE CHANNEL",
str_replace(BLOCK, "BATTLECREEK") ~ "BATTLE CREEK",
str_replace(BLOCK, "CESARCHAVEZ") ~ "CESAR CHAVEZ",
str_replace(BLOCK, "CHEROKEEHTS") ~ "CHEROKEE HTS",
str_replace(BLOCK, "CROCUSHILL") ~ "CROCUS HILL",
str_replace(BLOCK, "CROSBYFARM") ~ "CROSBY FARM",
str_replace(BLOCK, "CROSBYLAKE") ~ "CROSBY LAKE",
str_replace(BLOCK, "DANPATCH") ~ "DAN PATCH",
str_replace(BLOCK, "DOROTHYDAY") ~ "DOROTHY DAY",
str_replace(BLOCK, "DRJUSTUSOHAGE") ~ "DR JUSTUS OHAGE",
str_replace(BLOCK, "EDGCUMBE") ~ "EDGECUMBE",
str_replace(BLOCK, "ENERGYPARK") ~ "ENERGY PARK",
str_replace(BLOCK, "GRANDHILL") ~ "GRAND HILL",
str_replace(BLOCK, "HARDENBERGH") ~ "HARDEN BERGH",
str_replace(BLOCK, "HARRIETISLAND") ~ "HARRIET ISLAND",
str_replace(BLOCK, "HIDDENFALLS") ~ "HIDDEN FALLS",
str_replace(BLOCK, "HUNTINGVALLEY") ~ "HUNTING VALLEY",
str_replace(BLOCK, "IVANWAY") ~ "IVAN WAY",
str_replace(BLOCK, "JEFFERSONCOMMONS") ~ "JEFFERSON COMMONS",
str_replace(BLOCK, "JOHNIRELAND") ~ "JOHN IRELAND",
str_replace(BLOCK, "LAFAYETTEFRONTAGE") ~ "LAFAYETTE FRONTAGE",
str_replace(BLOCK, "LARRYHO") ~ "LARRY HO",
str_replace(BLOCK, "LOWERAFTON") ~ "LOWER AFTON",
str_replace(BLOCK, "LOWERSTDENNIS") ~ "LOWER ST DENNIS",
str_replace(BLOCK, "LYNNHURST") ~ "LYNN HURST",
str_replace(BLOCK, "MARTINLUTHERKING") ~ "MARTIN LUTHER KING",
str_replace(BLOCK, "MISSISSIPPIRIVER") ~ "MISSISSIPPI RIVER",
str_replace(BLOCK, "MORNINGSIDE") ~ "MORNING SIDE",
str_replace(BLOCK, "MTAIRY") ~ "MT AIRY",
str_replace(BLOCK, "MTCURVE") ~ "MT CURVE",
str_replace(BLOCK, "OLDSIXTH") ~ "OLD SIXTH",
str_replace(BLOCK, "OTTOHUMMER") ~ "OTTO HUMMER",
str_replace(BLOCK, "PIERCEBUTLER") ~ "PIERCE BUTLER",
str_replace(BLOCK, "PIGSEYELAKE") ~ "PIGSEYE LAKE",
str_replace(BLOCK, "PTDOUGLAS") ~ "PT DOUGLAS",
str_replace(BLOCK, "RIVERPARK") ~ "RIVER PARK",
str_replace(BLOCK, "SPRUCETREE") ~ "SPRUCE TREE",
str_replace(BLOCK, "STANTHONY") ~ "ST ANTHONY",
str_replace(BLOCK, "STALBANS") ~ "ST ALBANS",
str_replace(BLOCK, "STCLAIR") ~ "ST CLAIR",
str_replace(BLOCK, "STDENNIS") ~ "ST DENNIS",
str_replace(BLOCK, "STPAUL") ~ "ST PAUL",
str_replace(BLOCK, "STPETER") ~ "ST PETER",
str_replace(BLOCK, "TROUTBROOK") ~ "TROUT BROOK",
str_replace(BLOCK, "UPPERAFTON") ~ "UPPER AFTON",
str_replace(BLOCK, "UPPERSTDENNIS") ~ "UPPER ST DENNIS",
str_replace(BLOCK, "VANBUREN") ~ "VAN BUREN",
str_replace(BLOCK, "VANSLYKE") ~ "VAN SLYKE",
str_replace(BLOCK, "WHEELOCKRIDGE") ~ "WHEELOCK RIDGE",
str_replace(BLOCK, "WHITEBEAR") ~ "WHITE BEAR",
str_replace(BLOCK, "WILLIAMTELL") ~ "WILLIAM TELL",
str_replace(BLOCK, "YACHTCLUB") ~ "YACHT CLUB",
TRUE ~ BLOCK))
saintpaulcrime %>%
filter(!str_detect(BLOCK, " & "), !str_detect(BLOCK, " AND ")) %>%
mutate(street_address = word(BLOCK, 1),
street_address = str_replace(street_address, "X", "0")) %>%
mutate(BLOCK = str_replace(BLOCK, "OLDHUDSON") ~ "OLD HUDSON",
str_replace(BLOCK, "ANNARBOR") ~ "ANN ARBOR",
str_replace(BLOCK, "BARGECHANNEL") ~ "BARGE CHANNEL",
str_replace(BLOCK, "BATTLECREEK") ~ "BATTLE CREEK",
str_replace(BLOCK, "CESARCHAVEZ") ~ "CESAR CHAVEZ",
str_replace(BLOCK, "CHEROKEEHTS") ~ "CHEROKEE HTS",
str_replace(BLOCK, "CROCUSHILL") ~ "CROCUS HILL",
str_replace(BLOCK, "CROSBYFARM") ~ "CROSBY FARM",
str_replace(BLOCK, "CROSBYLAKE") ~ "CROSBY LAKE",
str_replace(BLOCK, "DANPATCH") ~ "DAN PATCH",
str_replace(BLOCK, "DOROTHYDAY") ~ "DOROTHY DAY",
str_replace(BLOCK, "DRJUSTUSOHAGE") ~ "DR JUSTUS OHAGE",
str_replace(BLOCK, "EDGCUMBE") ~ "EDGECUMBE",
str_replace(BLOCK, "ENERGYPARK") ~ "ENERGY PARK",
str_replace(BLOCK, "GRANDHILL") ~ "GRAND HILL",
str_replace(BLOCK, "HARDENBERGH") ~ "HARDEN BERGH",
str_replace(BLOCK, "HARRIETISLAND") ~ "HARRIET ISLAND",
str_replace(BLOCK, "HIDDENFALLS") ~ "HIDDEN FALLS",
str_replace(BLOCK, "HUNTINGVALLEY") ~ "HUNTING VALLEY",
str_replace(BLOCK, "IVANWAY") ~ "IVAN WAY",
str_replace(BLOCK, "JEFFERSONCOMMONS") ~ "JEFFERSON COMMONS",
str_replace(BLOCK, "JOHNIRELAND") ~ "JOHN IRELAND",
str_replace(BLOCK, "LAFAYETTEFRONTAGE") ~ "LAFAYETTE FRONTAGE",
str_replace(BLOCK, "LARRYHO") ~ "LARRY HO",
str_replace(BLOCK, "LOWERAFTON") ~ "LOWER AFTON",
str_replace(BLOCK, "LOWERSTDENNIS") ~ "LOWER ST DENNIS",
str_replace(BLOCK, "LYNNHURST") ~ "LYNN HURST",
str_replace(BLOCK, "MARTINLUTHERKING") ~ "MARTIN LUTHER KING",
str_replace(BLOCK, "MISSISSIPPIRIVER") ~ "MISSISSIPPI RIVER",
str_replace(BLOCK, "MORNINGSIDE") ~ "MORNING SIDE",
str_replace(BLOCK, "MTAIRY") ~ "MT AIRY",
str_replace(BLOCK, "MTCURVE") ~ "MT CURVE",
str_replace(BLOCK, "OLDSIXTH") ~ "OLD SIXTH",
str_replace(BLOCK, "OTTOHUMMER") ~ "OTTO HUMMER",
str_replace(BLOCK, "PIERCEBUTLER") ~ "PIERCE BUTLER",
str_replace(BLOCK, "PIGSEYELAKE") ~ "PIGSEYE LAKE",
str_replace(BLOCK, "PTDOUGLAS") ~ "PT DOUGLAS",
str_replace(BLOCK, "RIVERPARK") ~ "RIVER PARK",
str_replace(BLOCK, "SPRUCETREE") ~ "SPRUCE TREE",
str_replace(BLOCK, "STANTHONY") ~ "ST ANTHONY",
str_replace(BLOCK, "STALBANS") ~ "ST ALBANS",
str_replace(BLOCK, "STCLAIR") ~ "ST CLAIR",
str_replace(BLOCK, "STDENNIS") ~ "ST DENNIS",
str_replace(BLOCK, "STPAUL") ~ "ST PAUL",
str_replace(BLOCK, "STPETER") ~ "ST PETER",
str_replace(BLOCK, "TROUTBROOK") ~ "TROUT BROOK",
str_replace(BLOCK, "UPPERAFTON") ~ "UPPER AFTON",
str_replace(BLOCK, "UPPERSTDENNIS") ~ "UPPER ST DENNIS",
str_replace(BLOCK, "VANBUREN") ~ "VAN BUREN",
str_replace(BLOCK, "VANSLYKE") ~ "VAN SLYKE",
str_replace(BLOCK, "WHEELOCKRIDGE") ~ "WHEELOCK RIDGE",
str_replace(BLOCK, "WHITEBEAR") ~ "WHITE BEAR",
str_replace(BLOCK, "WILLIAMTELL") ~ "WILLIAM TELL",
str_replace(BLOCK, "YACHTCLUB") ~ "YACHT CLUB")
saintpaulcrime %>%
filter(!str_detect(BLOCK, " & "), !str_detect(BLOCK, " AND ")) %>%
mutate(street_address = word(BLOCK, 1),
street_address = str_replace(street_address, "X", "0")) %>%
mutate(BLOCK = str_replace(BLOCK, "OLDHUDSON") ~ "OLD HUDSON")
saintpaulcrime %>%
filter(!str_detect(BLOCK, " & "), !str_detect(BLOCK, " AND ")) %>%
mutate(street_address = word(BLOCK, 1),
street_address = str_replace(street_address, "X", "0")) %>%
mutate(BLOCK = str_replace(BLOCK, "OLDHUDSON", "OLD HUDSON"),
BLCOK = str_replace(BLOCK, "ANNARBOR", "ANN ARBOR"))
saintpaulcrime %>%
filter(!str_detect(BLOCK, " & "), !str_detect(BLOCK, " AND ")) %>%
mutate(street_address = word(BLOCK, 1),
street_address = str_replace(street_address, "X", "0")) %>%
mutate(BLOCK = str_replace(BLOCK, "OLDHUDSON", "OLD HUDSON"),
BLOCK = str_replace(BLOCK, "ANNARBOR", "ANN ARBOR"))
saintpaulcrime %>%
filter(!str_detect(BLOCK, " & "), !str_detect(BLOCK, " AND ")) %>%
mutate(street_address = word(BLOCK, 1),
street_address = str_replace(street_address, "X", "0")) %>%
mutate(BLOCK = str_replace(BLOCK, "OLDHUDSON", "OLD HUDSON"),
BLOCK = str_replace(BLOCK, "ANNARBOR", "ANN ARBOR"),
BLOCK = str_replace(BLOCK, "BARGECHANNEL", "BARGE CHANNEL"),
BLOCK = str_replace(BLOCK, "OLDHUDSON", "OLD HUDSON"),
BLOCK = str_replace(BLOCK, "ANNARBOR", "ANN ARBOR"),
BLOCK = str_replace(BLOCK, "BARGECHANNEL", "BARGE CHANNEL"),
BLOCK = str_replace(BLOCK, "OLDHUDSON", "OLD HUDSON"),
BLOCK = str_replace(BLOCK, "ANNARBOR", "ANN ARBOR"),
BLOCK = str_replace(BLOCK, "BARGECHANNEL", "BARGE CHANNEL"),
,
str_replace(BLOCK, "BATTLECREEK") ~ "BATTLE CREEK",
str_replace(BLOCK, "CESARCHAVEZ") ~ "CESAR CHAVEZ",
str_replace(BLOCK, "CHEROKEEHTS") ~ "CHEROKEE HTS",
str_replace(BLOCK, "CROCUSHILL") ~ "CROCUS HILL",
str_replace(BLOCK, "CROSBYFARM") ~ "CROSBY FARM",
str_replace(BLOCK, "CROSBYLAKE") ~ "CROSBY LAKE",
str_replace(BLOCK, "DANPATCH") ~ "DAN PATCH",
str_replace(BLOCK, "DOROTHYDAY") ~ "DOROTHY DAY",
str_replace(BLOCK, "DRJUSTUSOHAGE") ~ "DR JUSTUS OHAGE",
str_replace(BLOCK, "EDGCUMBE") ~ "EDGECUMBE",
str_replace(BLOCK, "ENERGYPARK") ~ "ENERGY PARK",
str_replace(BLOCK, "GRANDHILL") ~ "GRAND HILL",
str_replace(BLOCK, "HARDENBERGH") ~ "HARDEN BERGH",
str_replace(BLOCK, "HARRIETISLAND") ~ "HARRIET ISLAND",
str_replace(BLOCK, "HIDDENFALLS") ~ "HIDDEN FALLS",
str_replace(BLOCK, "HUNTINGVALLEY") ~ "HUNTING VALLEY",
str_replace(BLOCK, "IVANWAY") ~ "IVAN WAY",
str_replace(BLOCK, "JEFFERSONCOMMONS") ~ "JEFFERSON COMMONS",
str_replace(BLOCK, "JOHNIRELAND") ~ "JOHN IRELAND",
str_replace(BLOCK, "LAFAYETTEFRONTAGE") ~ "LAFAYETTE FRONTAGE",
str_replace(BLOCK, "LARRYHO") ~ "LARRY HO",
str_replace(BLOCK, "LOWERAFTON") ~ "LOWER AFTON",
str_replace(BLOCK, "LOWERSTDENNIS") ~ "LOWER ST DENNIS",
str_replace(BLOCK, "LYNNHURST") ~ "LYNN HURST",
str_replace(BLOCK, "MARTINLUTHERKING") ~ "MARTIN LUTHER KING",
str_replace(BLOCK, "MISSISSIPPIRIVER") ~ "MISSISSIPPI RIVER",
str_replace(BLOCK, "MORNINGSIDE") ~ "MORNING SIDE",
str_replace(BLOCK, "MTAIRY") ~ "MT AIRY",
str_replace(BLOCK, "MTCURVE") ~ "MT CURVE",
str_replace(BLOCK, "OLDSIXTH") ~ "OLD SIXTH",
str_replace(BLOCK, "OTTOHUMMER") ~ "OTTO HUMMER",
str_replace(BLOCK, "PIERCEBUTLER") ~ "PIERCE BUTLER",
str_replace(BLOCK, "PIGSEYELAKE") ~ "PIGSEYE LAKE",
str_replace(BLOCK, "PTDOUGLAS") ~ "PT DOUGLAS",
str_replace(BLOCK, "RIVERPARK") ~ "RIVER PARK",
str_replace(BLOCK, "SPRUCETREE") ~ "SPRUCE TREE",
str_replace(BLOCK, "STANTHONY") ~ "ST ANTHONY",
str_replace(BLOCK, "STALBANS") ~ "ST ALBANS",
str_replace(BLOCK, "STCLAIR") ~ "ST CLAIR",
str_replace(BLOCK, "STDENNIS") ~ "ST DENNIS",
str_replace(BLOCK, "STPAUL") ~ "ST PAUL",
str_replace(BLOCK, "STPETER") ~ "ST PETER",
str_replace(BLOCK, "TROUTBROOK") ~ "TROUT BROOK",
str_replace(BLOCK, "UPPERAFTON") ~ "UPPER AFTON",
str_replace(BLOCK, "UPPERSTDENNIS") ~ "UPPER ST DENNIS",
str_replace(BLOCK, "VANBUREN") ~ "VAN BUREN",
str_replace(BLOCK, "VANSLYKE") ~ "VAN SLYKE",
str_replace(BLOCK, "WHEELOCKRIDGE") ~ "WHEELOCK RIDGE",
str_replace(BLOCK, "WHITEBEAR") ~ "WHITE BEAR",
str_replace(BLOCK, "WILLIAMTELL") ~ "WILLIAM TELL",
str_replace(BLOCK, "YACHTCLUB") ~ "YACHT CLUB")
saintpaulcrime %>%
filter(!str_detect(BLOCK, " & "), !str_detect(BLOCK, " AND ")) %>%
mutate(street_address = word(BLOCK, 1),
street_address = str_replace(street_address, "X", "0")) %>%
mutate(BLOCK = str_replace(BLOCK, "OLDHUDSON", "OLD HUDSON"),
BLOCK = str_replace(BLOCK, "ANNARBOR", "ANN ARBOR"),
BLOCK = str_replace(BLOCK, "BARGECHANNEL", "BARGE CHANNEL"),
BLOCK = str_replace(BLOCK, "BATTLECREEK", "BATTLE CREEK",
BLOCK = str_replace(BLOCK, "CESARCHAVEZ", "CESAR CHAVEZ"),
BLOCK = str_replace(BLOCK, "CHEROKEEHTS", "CHEROKEE HTS"),
BLOCK = str_replace(BLOCK, "CROCUSHILL", "CROCUS HILL"),
BLOCK = str_replace(BLOCK, "CROSBYFARM", "CROSBY FARM"),
BLOCK = str_replace(BLOCK, "CROSBYLAKE", "CROSBY LAKE"),
BLOCK = str_replace(BLOCK, "DANPATCH", "DAN PATCH"),
BLOCK = str_replace(BLOCK, "DOROTHYDAY", "DOROTHY DAY"),
BLOCK = str_replace(BLOCK, "DRJUSTUSOHAGE", "DR JUSTUS OHAGE"),
BLOCK = str_replace(BLOCK, "EDGCUMBE", "EDGECUMBE"),
BLOCK = str_replace(BLOCK, "ENERGYPARK", "ENERGY PARK"),
BLOCK = str_replace(BLOCK, "GRANDHILL", "GRAND HILL"),
BLOCK = str_replace(BLOCK, "HARDENBERGH", "HARDEN BERGH"),
BLOCK = str_replace(BLOCK, "HARRIETISLAND", "HARRIET ISLAND"),
BLOCK = str_replace(BLOCK, "HIDDENFALLS", "HIDDEN FALLS"),
BLOCK = str_replace(BLOCK, "HUNTINGVALLEY", "HUNTING VALLEY"),
BLOCK = str_replace(BLOCK, "IVANWAY", "IVAN WAY"),
BLOCK = str_replace(BLOCK, "JEFFERSONCOMMONS", "JEFFERSON COMMONS"),
BLOCK = str_replace(BLOCK, "JOHNIRELAND", "JOHN IRELAND"),
BLOCK = str_replace(BLOCK, "LAFAYETTEFRONTAGE", "LAFAYETTE FRONTAGE"),
BLOCK = str_replace(BLOCK, "LARRYHO", "LARRY HO"),
BLOCK = str_replace(BLOCK, "LOWERAFTON", "LOWER AFTON"),
BLOCK = str_replace(BLOCK, "LOWERSTDENNIS", "LOWER ST DENNIS"),
BLOCK = str_replace(BLOCK, "LYNNHURST", "LYNN HURST"),
BLOCK = str_replace(BLOCK, "MARTINLUTHERKING", "MARTIN LUTHER KING"),
BLOCK = str_replace(BLOCK, "MISSISSIPPIRIVER", "MISSISSIPPI RIVER"),
BLOCK = str_replace(BLOCK, "MORNINGSIDE", "MORNING SIDE"),
BLOCK = str_replace(BLOCK, "MTAIRY", "MT AIRY"),
BLOCK = str_replace(BLOCK, "MTCURVE", "MT CURVE"),
BLOCK = str_replace(BLOCK, "OLDSIXTH", "OLD SIXTH"),
BLOCK = str_replace(BLOCK, "OTTOHUMMER", "OTTO HUMMER"),
BLOCK = str_replace(BLOCK, "PIERCEBUTLER", "PIERCE BUTLER"),
BLOCK = str_replace(BLOCK, "PIGSEYELAKE", "PIGSEYE LAKE"),
BLOCK = str_replace(BLOCK, "PTDOUGLAS", "PT DOUGLAS"),
BLOCK = str_replace(BLOCK, "RIVERPARK", "RIVER PARK"),
BLOCK = str_replace(BLOCK, "SPRUCETREE", "SPRUCE TREE"),
BLOCK = str_replace(BLOCK, "STANTHONY", "ST ANTHONY"),
BLOCK = str_replace(BLOCK, "STALBANS", "ST ALBANS"),
BLOCK = str_replace(BLOCK, "STCLAIR", "ST CLAIR"),
BLOCK = str_replace(BLOCK, "STDENNIS", "ST DENNIS"),
BLOCK = str_replace(BLOCK, "STPAUL", "ST PAUL"),
BLOCK = str_replace(BLOCK, "STPETER", "ST PETER"),
BLOCK = str_replace(BLOCK, "TROUTBROOK", "TROUT BROOK"),
BLOCK = str_replace(BLOCK, "UPPERAFTON", "UPPER AFTON"),
BLOCK = str_replace(BLOCK, "UPPERSTDENNIS", "UPPER ST DENNIS"),
BLOCK = str_replace(BLOCK, "VANBUREN", "VAN BUREN"),
BLOCK = str_replace(BLOCK, "VANSLYKE", "VAN SLYKE"),
BLOCK = str_replace(BLOCK, "WHEELOCKRIDGE", "WHEELOCK RIDGE"),
BLOCK = str_replace(BLOCK, "WHITEBEAR", "WHITE BEAR"),
BLOCK = str_replace(BLOCK, "WILLIAMTELL", "WILLIAM TELL"),
BLOCK = str_replace(BLOCK, "YACHTCLUB", "YACHT CLUB"))
saintpaulcrime %>%
filter(!str_detect(BLOCK, " & "), !str_detect(BLOCK, " AND ")) %>%
mutate(street_address = word(BLOCK, 1),
street_address = str_replace(street_address, "X", "0")) %>%
mutate(BLOCK = str_replace(BLOCK, "OLDHUDSON", "OLD HUDSON"),
BLOCK = str_replace(BLOCK, "ANNARBOR", "ANN ARBOR"),
BLOCK = str_replace(BLOCK, "BARGECHANNEL", "BARGE CHANNEL"),
BLOCK = str_replace(BLOCK, "BATTLECREEK", "BATTLE CREEK",
BLOCK = str_replace(BLOCK, "CESARCHAVEZ", "CESAR CHAVEZ"),
BLOCK = str_replace(BLOCK, "CHEROKEEHTS", "CHEROKEE HTS"),
BLOCK = str_replace(BLOCK, "CROCUSHILL", "CROCUS HILL"),
BLOCK = str_replace(BLOCK, "CROSBYFARM", "CROSBY FARM"),
BLOCK = str_replace(BLOCK, "CROSBYLAKE", "CROSBY LAKE"),
BLOCK = str_replace(BLOCK, "DANPATCH", "DAN PATCH"),
BLOCK = str_replace(BLOCK, "DOROTHYDAY", "DOROTHY DAY"))
saintpaulcrime %>%
filter(!str_detect(BLOCK, " & "), !str_detect(BLOCK, " AND ")) %>%
mutate(street_address = word(BLOCK, 1),
street_address = str_replace(street_address, "X", "0")) %>%
mutate(BLOCK = str_replace(BLOCK, "OLDHUDSON", "OLD HUDSON"),
BLOCK = str_replace(BLOCK, "ANNARBOR", "ANN ARBOR"))
saintpaulcrime %>%
filter(!str_detect(BLOCK, " & "), !str_detect(BLOCK, " AND ")) %>%
mutate(street_address = word(BLOCK, 1),
street_address = str_replace(street_address, "X", "0")) %>%
mutate(BLOCK = str_replace(BLOCK, "OLDHUDSON", "OLD HUDSON"),
BLOCK = str_replace(BLOCK, "ANNARBOR", "ANN ARBOR"),
BLOCK = str_replace(BLOCK, "BARGECHANNEL", "BARGE CHANNEL"),
BLOCK = str_replace(BLOCK, "BATTLECREEK", "BATTLE CREEK"),
BLOCK = str_replace(BLOCK, "CESARCHAVEZ", "CESAR CHAVEZ"),
BLOCK = str_replace(BLOCK, "CHEROKEEHTS", "CHEROKEE HTS"),
BLOCK = str_replace(BLOCK, "CROCUSHILL", "CROCUS HILL"),
BLOCK = str_replace(BLOCK, "CROSBYFARM", "CROSBY FARM"),
BLOCK = str_replace(BLOCK, "CROSBYLAKE", "CROSBY LAKE"),
BLOCK = str_replace(BLOCK, "DANPATCH", "DAN PATCH"),
BLOCK = str_replace(BLOCK, "DOROTHYDAY", "DOROTHY DAY"),
BLOCK = str_replace(BLOCK, "DRJUSTUSOHAGE", "DR JUSTUS OHAGE"),
BLOCK = str_replace(BLOCK, "EDGCUMBE", "EDGECUMBE"),
BLOCK = str_replace(BLOCK, "ENERGYPARK", "ENERGY PARK"),
BLOCK = str_replace(BLOCK, "GRANDHILL", "GRAND HILL"),
BLOCK = str_replace(BLOCK, "HARDENBERGH", "HARDEN BERGH"),
BLOCK = str_replace(BLOCK, "HARRIETISLAND", "HARRIET ISLAND"),
BLOCK = str_replace(BLOCK, "HIDDENFALLS", "HIDDEN FALLS"),
BLOCK = str_replace(BLOCK, "HUNTINGVALLEY", "HUNTING VALLEY"),
BLOCK = str_replace(BLOCK, "IVANWAY", "IVAN WAY"),
BLOCK = str_replace(BLOCK, "JEFFERSONCOMMONS", "JEFFERSON COMMONS"),
BLOCK = str_replace(BLOCK, "JOHNIRELAND", "JOHN IRELAND"),
BLOCK = str_replace(BLOCK, "LAFAYETTEFRONTAGE", "LAFAYETTE FRONTAGE"),
BLOCK = str_replace(BLOCK, "LARRYHO", "LARRY HO"),
BLOCK = str_replace(BLOCK, "LOWERAFTON", "LOWER AFTON"),
BLOCK = str_replace(BLOCK, "LOWERSTDENNIS", "LOWER ST DENNIS"),
BLOCK = str_replace(BLOCK, "LYNNHURST", "LYNN HURST"),
BLOCK = str_replace(BLOCK, "MARTINLUTHERKING", "MARTIN LUTHER KING"),
BLOCK = str_replace(BLOCK, "MISSISSIPPIRIVER", "MISSISSIPPI RIVER"),
BLOCK = str_replace(BLOCK, "MORNINGSIDE", "MORNING SIDE"),
BLOCK = str_replace(BLOCK, "MTAIRY", "MT AIRY"),
BLOCK = str_replace(BLOCK, "MTCURVE", "MT CURVE"),
BLOCK = str_replace(BLOCK, "OLDSIXTH", "OLD SIXTH"),
BLOCK = str_replace(BLOCK, "OTTOHUMMER", "OTTO HUMMER"),
BLOCK = str_replace(BLOCK, "PIERCEBUTLER", "PIERCE BUTLER"),
BLOCK = str_replace(BLOCK, "PIGSEYELAKE", "PIGSEYE LAKE"),
BLOCK = str_replace(BLOCK, "PTDOUGLAS", "PT DOUGLAS"),
BLOCK = str_replace(BLOCK, "RIVERPARK", "RIVER PARK"),
BLOCK = str_replace(BLOCK, "SPRUCETREE", "SPRUCE TREE"),
BLOCK = str_replace(BLOCK, "STANTHONY", "ST ANTHONY"),
BLOCK = str_replace(BLOCK, "STALBANS", "ST ALBANS"),
BLOCK = str_replace(BLOCK, "STCLAIR", "ST CLAIR"),
BLOCK = str_replace(BLOCK, "STDENNIS", "ST DENNIS"),
BLOCK = str_replace(BLOCK, "STPAUL", "ST PAUL"),
BLOCK = str_replace(BLOCK, "STPETER", "ST PETER"),
BLOCK = str_replace(BLOCK, "TROUTBROOK", "TROUT BROOK"),
BLOCK = str_replace(BLOCK, "UPPERAFTON", "UPPER AFTON"),
BLOCK = str_replace(BLOCK, "UPPERSTDENNIS", "UPPER ST DENNIS"),
BLOCK = str_replace(BLOCK, "VANBUREN", "VAN BUREN"),
BLOCK = str_replace(BLOCK, "VANSLYKE", "VAN SLYKE"),
BLOCK = str_replace(BLOCK, "WHEELOCKRIDGE", "WHEELOCK RIDGE"),
BLOCK = str_replace(BLOCK, "WHITEBEAR", "WHITE BEAR"),
BLOCK = str_replace(BLOCK, "WILLIAMTELL", "WILLIAM TELL"),
BLOCK = str_replace(BLOCK, "YACHTCLUB", "YACHT CLUB"))
saintpaulcrime %>%
filter(!str_detect(BLOCK, " & "), !str_detect(BLOCK, " AND ")) %>%
mutate(street_address = word(BLOCK, 1),
street_address = str_replace(street_address, "X", "0")) %>%
mutate(stuff = str_split(BLOCK, " ", 2))
sp <- saintpaulcrime %>%
filter(!str_detect(BLOCK, " & "), !str_detect(BLOCK, " AND ")) %>%
mutate(street_address = word(BLOCK, 1),
street_address = str_replace(street_address, "X", "0"))
sapply(sapply(strsplit(sp$BLOCK, split = ' '), function(x) x[2:length(x)]), paste, collapse = ' ')
sp$BLOCK <- sapply(sapply(strsplit(sp$BLOCK, split = ' '), function(x) x[2:length(x)]), paste, collapse = ' ')
sp <- sp %>%
mutate(BLOCK = str_replace(BLOCK, "OLDHUDSON", "OLD HUDSON"),
BLOCK = str_replace(BLOCK, "ANNARBOR", "ANN ARBOR"),
BLOCK = str_replace(BLOCK, "BARGECHANNEL", "BARGE CHANNEL"),
BLOCK = str_replace(BLOCK, "BATTLECREEK", "BATTLE CREEK"),
BLOCK = str_replace(BLOCK, "CESARCHAVEZ", "CESAR CHAVEZ"),
BLOCK = str_replace(BLOCK, "CHEROKEEHTS", "CHEROKEE HTS"),
BLOCK = str_replace(BLOCK, "CROCUSHILL", "CROCUS HILL"),
BLOCK = str_replace(BLOCK, "CROSBYFARM", "CROSBY FARM"),
BLOCK = str_replace(BLOCK, "CROSBYLAKE", "CROSBY LAKE"),
BLOCK = str_replace(BLOCK, "DANPATCH", "DAN PATCH"),
BLOCK = str_replace(BLOCK, "DOROTHYDAY", "DOROTHY DAY"),
BLOCK = str_replace(BLOCK, "DRJUSTUSOHAGE", "DR JUSTUS OHAGE"),
BLOCK = str_replace(BLOCK, "EDGCUMBE", "EDGECUMBE"),
BLOCK = str_replace(BLOCK, "ENERGYPARK", "ENERGY PARK"),
BLOCK = str_replace(BLOCK, "GRANDHILL", "GRAND HILL"),
BLOCK = str_replace(BLOCK, "HARDENBERGH", "HARDEN BERGH"),
BLOCK = str_replace(BLOCK, "HARRIETISLAND", "HARRIET ISLAND"),
BLOCK = str_replace(BLOCK, "HIDDENFALLS", "HIDDEN FALLS"),
BLOCK = str_replace(BLOCK, "HUNTINGVALLEY", "HUNTING VALLEY"),
BLOCK = str_replace(BLOCK, "IVANWAY", "IVAN WAY"),
BLOCK = str_replace(BLOCK, "JEFFERSONCOMMONS", "JEFFERSON COMMONS"),
BLOCK = str_replace(BLOCK, "JOHNIRELAND", "JOHN IRELAND"),
BLOCK = str_replace(BLOCK, "LAFAYETTEFRONTAGE", "LAFAYETTE FRONTAGE"),
BLOCK = str_replace(BLOCK, "LARRYHO", "LARRY HO"),
BLOCK = str_replace(BLOCK, "LOWERAFTON", "LOWER AFTON"),
BLOCK = str_replace(BLOCK, "LOWERSTDENNIS", "LOWER ST DENNIS"),
BLOCK = str_replace(BLOCK, "LYNNHURST", "LYNN HURST"),
BLOCK = str_replace(BLOCK, "MARTINLUTHERKING", "MARTIN LUTHER KING"),
BLOCK = str_replace(BLOCK, "MISSISSIPPIRIVER", "MISSISSIPPI RIVER"),
BLOCK = str_replace(BLOCK, "MORNINGSIDE", "MORNING SIDE"),
BLOCK = str_replace(BLOCK, "MTAIRY", "MT AIRY"),
BLOCK = str_replace(BLOCK, "MTCURVE", "MT CURVE"),
BLOCK = str_replace(BLOCK, "OLDSIXTH", "OLD SIXTH"),
BLOCK = str_replace(BLOCK, "OTTOHUMMER", "OTTO HUMMER"),
BLOCK = str_replace(BLOCK, "PIERCEBUTLER", "PIERCE BUTLER"),
BLOCK = str_replace(BLOCK, "PIGSEYELAKE", "PIGSEYE LAKE"),
BLOCK = str_replace(BLOCK, "PTDOUGLAS", "PT DOUGLAS"),
BLOCK = str_replace(BLOCK, "RIVERPARK", "RIVER PARK"),
BLOCK = str_replace(BLOCK, "SPRUCETREE", "SPRUCE TREE"),
BLOCK = str_replace(BLOCK, "STANTHONY", "ST ANTHONY"),
BLOCK = str_replace(BLOCK, "STALBANS", "ST ALBANS"),
BLOCK = str_replace(BLOCK, "STCLAIR", "ST CLAIR"),
BLOCK = str_replace(BLOCK, "STDENNIS", "ST DENNIS"),
BLOCK = str_replace(BLOCK, "STPAUL", "ST PAUL"),
BLOCK = str_replace(BLOCK, "STPETER", "ST PETER"),
BLOCK = str_replace(BLOCK, "TROUTBROOK", "TROUT BROOK"),
BLOCK = str_replace(BLOCK, "UPPERAFTON", "UPPER AFTON"),
BLOCK = str_replace(BLOCK, "UPPERSTDENNIS", "UPPER ST DENNIS"),
BLOCK = str_replace(BLOCK, "VANBUREN", "VAN BUREN"),
BLOCK = str_replace(BLOCK, "VANSLYKE", "VAN SLYKE"),
BLOCK = str_replace(BLOCK, "WHEELOCKRIDGE", "WHEELOCK RIDGE"),
BLOCK = str_replace(BLOCK, "WHITEBEAR", "WHITE BEAR"),
BLOCK = str_replace(BLOCK, "WILLIAMTELL", "WILLIAM TELL"),
BLOCK = str_replace(BLOCK, "YACHTCLUB", "YACHT CLUB"),
BLOCK = str_replace(BLOCK, " BD", " BLVD"),
BLOCK = str_replace(BLOCK, " PK", " PKWY"))
View(sp)
>>>>>>> Stashed changes
sp <- saintpaulcrime %>%
filter(!str_detect(BLOCK, " & "), !str_detect(BLOCK, " AND ")) %>%
mutate(street_address = word(BLOCK, 1),
street_address = str_replace(street_address, "X", "0"))
sp$BLOCK <- sapply(sapply(strsplit(sp$BLOCK, split = ' '), function(x) x[2:length(x)]), paste, collapse = ' ')
sp <- sp %>%
mutate(BLOCK = str_replace(BLOCK, "OLDHUDSON", "OLD HUDSON"),
BLOCK = str_replace(BLOCK, "ANNARBOR", "ANN ARBOR"),
BLOCK = str_replace(BLOCK, "BARGECHANNEL", "BARGE CHANNEL"),
BLOCK = str_replace(BLOCK, "BATTLECREEK", "BATTLE CREEK"),
BLOCK = str_replace(BLOCK, "CESARCHAVEZ", "CESAR CHAVEZ"),
BLOCK = str_replace(BLOCK, "CHEROKEEHTS", "CHEROKEE HTS"),
BLOCK = str_replace(BLOCK, "CROCUSHILL", "CROCUS HILL"),
BLOCK = str_replace(BLOCK, "CROSBYFARM", "CROSBY FARM"),
BLOCK = str_replace(BLOCK, "CROSBYLAKE", "CROSBY LAKE"),
BLOCK = str_replace(BLOCK, "DANPATCH", "DAN PATCH"),
BLOCK = str_replace(BLOCK, "DOROTHYDAY", "DOROTHY DAY"),
BLOCK = str_replace(BLOCK, "DRJUSTUSOHAGE", "DR JUSTUS OHAGE"),
BLOCK = str_replace(BLOCK, "EDGCUMBE", "EDGECUMBE"),
BLOCK = str_replace(BLOCK, "ENERGYPARK", "ENERGY PARK"),
BLOCK = str_replace(BLOCK, "GRANDHILL", "GRAND HILL"),
BLOCK = str_replace(BLOCK, "HARDENBERGH", "HARDEN BERGH"),
BLOCK = str_replace(BLOCK, "HARRIETISLAND", "HARRIET ISLAND"),
BLOCK = str_replace(BLOCK, "HIDDENFALLS", "HIDDEN FALLS"),
BLOCK = str_replace(BLOCK, "HUNTINGVALLEY", "HUNTING VALLEY"),
BLOCK = str_replace(BLOCK, "IVANWAY", "IVAN WAY"),
BLOCK = str_replace(BLOCK, "JEFFERSONCOMMONS", "JEFFERSON COMMONS"),
BLOCK = str_replace(BLOCK, "JOHNIRELAND", "JOHN IRELAND"),
BLOCK = str_replace(BLOCK, "LAFAYETTEFRONTAGE", "LAFAYETTE FRONTAGE"),
BLOCK = str_replace(BLOCK, "LARRYHO", "LARRY HO"),
BLOCK = str_replace(BLOCK, "LOWERAFTON", "LOWER AFTON"),
BLOCK = str_replace(BLOCK, "LOWERSTDENNIS", "LOWER ST DENNIS"),
BLOCK = str_replace(BLOCK, "LYNNHURST", "LYNN HURST"),
BLOCK = str_replace(BLOCK, "MARTINLUTHERKING", "MARTIN LUTHER KING"),
BLOCK = str_replace(BLOCK, "MISSISSIPPIRIVER", "MISSISSIPPI RIVER"),
BLOCK = str_replace(BLOCK, "MORNINGSIDE", "MORNING SIDE"),
BLOCK = str_replace(BLOCK, "MTAIRY", "MT AIRY"),
BLOCK = str_replace(BLOCK, "MTCURVE", "MT CURVE"),
BLOCK = str_replace(BLOCK, "OLDSIXTH", "OLD SIXTH"),
BLOCK = str_replace(BLOCK, "OTTOHUMMER", "OTTO HUMMER"),
BLOCK = str_replace(BLOCK, "PIERCEBUTLER", "PIERCE BUTLER"),
BLOCK = str_replace(BLOCK, "PIGSEYELAKE", "PIGSEYE LAKE"),
BLOCK = str_replace(BLOCK, "PTDOUGLAS", "PT DOUGLAS"),
BLOCK = str_replace(BLOCK, "RIVERPARK", "RIVER PARK"),
BLOCK = str_replace(BLOCK, "SPRUCETREE", "SPRUCE TREE"),
BLOCK = str_replace(BLOCK, "STANTHONY", "ST ANTHONY"),
BLOCK = str_replace(BLOCK, "STALBANS", "ST ALBANS"),
BLOCK = str_replace(BLOCK, "STCLAIR", "ST CLAIR"),
BLOCK = str_replace(BLOCK, "STDENNIS", "ST DENNIS"),
BLOCK = str_replace(BLOCK, "STPAUL", "ST PAUL"),
BLOCK = str_replace(BLOCK, "STPETER", "ST PETER"),
BLOCK = str_replace(BLOCK, "TROUTBROOK", "TROUT BROOK"),
BLOCK = str_replace(BLOCK, "UPPERAFTON", "UPPER AFTON"),
BLOCK = str_replace(BLOCK, "UPPERSTDENNIS", "UPPER ST DENNIS"),
BLOCK = str_replace(BLOCK, "VANBUREN", "VAN BUREN"),
BLOCK = str_replace(BLOCK, "VANSLYKE", "VAN SLYKE"),
BLOCK = str_replace(BLOCK, "WHEELOCKRIDGE", "WHEELOCK RIDGE"),
BLOCK = str_replace(BLOCK, "WHITEBEAR", "WHITE BEAR"),
BLOCK = str_replace(BLOCK, "WILLIAMTELL", "WILLIAM TELL"),
BLOCK = str_replace(BLOCK, "YACHTCLUB", "YACHT CLUB"),
BLOCK = str_replace(BLOCK, " BD", " BLVD"),
BLOCK = str_replace(BLOCK, " PK", " PKWY")) %>%
mutate(address = paste(street_address, BLOCK))
<<<<<<< Updated upstream
library(tidygeocoder)
blocksLatLng <- sp %>%
mutate(address = paste0(address, ", Saint Paul, MN")) %>%
tidygeocoder::geocode(address, method = 'osm', lat = latitude, long = longitude)
save(blocksLatLng, file = "Data/CrimeCleaned/blocksLatLng.RData")
load("Data/CrimeCleaned/blocksLatLng.RData")
blocksLatLng %>%
filter(is.na(latitude)) %>%
filter(str_detect(address, " PA ")) %>%
mutate(address = str_replace(BLOCK, " PA", " PKWY")) %>%
tidygeocoder::geocode(address, method = 'osm', lat = latitude, long = longitude)
save(blockLatLngPA, file = "Data/CrimeCleaned/blocksLatLngPA.RData")
blocksLatLng %>%
filter(is.na(latitude))
blocksLatLng %>%
filter(is.na(latitude)) %>%
filter(str_detect(address, " PA "))
blocksLatLng %>%
filter(is.na(latitude)) %>%
filter(str_detect(address, " PA ")) %>%
mutate(address = str_replace(address, " PA ", " PKWY")) %>%
select(-latitude, -longitude)
blocksLatLng %>%
filter(is.na(latitude)) %>%
filter(str_detect(address, " PA ")) %>%
mutate(address = str_replace(address, " PA ", " PKWY ")) %>%
select(-latitude, -longitude)
blocksLatLng %>%
filter(is.na(latitude)) %>%
filter(str_detect(address, " PA ")) %>%
mutate(address = str_replace(address, " PA ", " PKWY ")) %>%
select(-latitude, -longitude) %>%
=======
sp
sp %>%
head(6) %>%
tidygeocoder::geocode(address, method = 'osm', lat = latitude, long = longitude)
sp %>%
mutate(address = paste(address, ", Saint Paul, MN"))
sp %>%
mutate(address = paste0(address, ", Saint Paul, MN")) %>%
head(6) %>%
tidygeocoder::geocode(address, method = 'osm', lat = latitude, long = longitude)
sp %>%
mutate(address = paste0(address, ", Saint Paul, MN")) %>%
head(6) %>%
>>>>>>> Stashed changes
tidygeocoder::geocode(address, method = 'osm', lat = latitude, long = longitude)
